{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\20212PF.CC0020\\\\Documents\\\\Gestao_Frontend\\\\Gestao_Front\\\\src\\\\componentes\\\\telas\\\\login\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { gravaAutenticacao, getToken } from '../../../seguranca/Autenticacao';\nimport Carregando from '../../comuns/Carregando';\nimport Alerta from '../../comuns/Alerta';\nimport CampoEntrada from '../../comuns/CampoEntrada';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [senha, setSenha] = useState(\"\");\n  const [alerta, setAlerta] = useState({\n    status: \"\",\n    message: \"\"\n  });\n  const [autenticado, setAutenticado] = useState(false);\n  const [carregando, setCarregando] = useState(false);\n  const acaoLogin = async e => {\n    e.preventDefault();\n    try {\n      const body = {\n        email: email,\n        senha: senha\n      };\n      setCarregando(true);\n      await fetch(`${process.env.REACT_APP_ENDERECO_API}/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      }).then(response => response.json()).then(json => {\n        if (json.auth === false) {\n          setAlerta({\n            status: \"error\",\n            message: json.message\n          });\n        }\n        if (json.auth === true) {\n          setAutenticado(true);\n          gravaAutenticacao(json);\n        }\n      });\n    } catch (err) {\n      console.error(err.message);\n      setAlerta({\n        status: \"error\",\n        message: err.message\n      });\n    } finally {\n      setCarregando(false);\n    }\n  };\n  useEffect(() => {\n    try {\n      const token = getToken();\n      if (token != null) {\n        setAutenticado(true);\n      }\n    } catch (err) {\n      setAlerta({\n        status: \"error\",\n        message: err != null ? err.message : \"\"\n      });\n    }\n  }, []);\n  if (autenticado === true) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/privado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12 col-md-6\",\n        children: /*#__PURE__*/_jsxDEV(Carregando, {\n          carregando: carregando,\n          children: [/*#__PURE__*/_jsxDEV(Alerta, {\n            alerta: alerta\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: acaoLogin,\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"h3 mb-3 fw-normal\",\n              children: \"Login de usu\\xE1rio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(CampoEntrada, {\n              value: email,\n              id: \"txtEmail\",\n              name: \"email\",\n              label: \"Nome\",\n              tipo: \"email\",\n              onchange: e => setEmail(e.target.value),\n              msgvalido: \"Email OK\",\n              msginvalido: \"Informe o email\",\n              requerido: true,\n              readonly: false,\n              maxCaracteres: 40\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(CampoEntrada, {\n              value: senha,\n              id: \"txtSenha\",\n              name: \"senha\",\n              label: \"Senha\",\n              tipo: \"password\",\n              onchange: e => setSenha(e.target.value),\n              msgvalido: \"Senha OK\",\n              msginvalido: \"Informe a senha\",\n              requerido: true,\n              readonly: false,\n              maxCaracteres: 40\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"w-100 btn btn-lg btn-primary\",\n              type: \"submit\",\n              children: \"Efetuar login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n}\n_s(Login, \"FkLWPHYCV95aQ+LqZzlNczgUwiw=\");\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","useEffect","Navigate","gravaAutenticacao","getToken","Carregando","Alerta","CampoEntrada","jsxDEV","_jsxDEV","Login","_s","email","setEmail","senha","setSenha","alerta","setAlerta","status","message","autenticado","setAutenticado","carregando","setCarregando","acaoLogin","e","preventDefault","body","fetch","process","env","REACT_APP_ENDERECO_API","method","headers","JSON","stringify","then","response","json","auth","err","console","error","token","to","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onSubmit","value","id","name","label","tipo","onchange","target","msgvalido","msginvalido","requerido","readonly","maxCaracteres","type","_c","$RefreshReg$"],"sources":["C:/Users/20212PF.CC0020/Documents/Gestao_Frontend/Gestao_Front/src/componentes/telas/login/Login.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { gravaAutenticacao, getToken } from '../../../seguranca/Autenticacao';\r\nimport Carregando from '../../comuns/Carregando';\r\nimport Alerta from '../../comuns/Alerta';\r\nimport CampoEntrada from '../../comuns/CampoEntrada';\r\n\r\nfunction Login() {\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [senha, setSenha] = useState(\"\");\r\n    const [alerta, setAlerta] = useState({ status: \"\", message: \"\" });\r\n    const [autenticado, setAutenticado] = useState(false);\r\n    const [carregando, setCarregando] = useState(false);\r\n\r\n    const acaoLogin = async e => {\r\n\r\n        e.preventDefault();\r\n\r\n        try {\r\n            const body = {\r\n                email: email,\r\n                senha: senha\r\n            };\r\n            setCarregando(true);\r\n            await fetch(`${process.env.REACT_APP_ENDERECO_API}/login`, {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify(body),\r\n            }).then(response => response.json())\r\n                .then(json => {\r\n                    if (json.auth === false) {\r\n                        setAlerta({ status: \"error\", message: json.message })\r\n                    }\r\n                    if (json.auth === true) {\r\n                        setAutenticado(true);\r\n                        gravaAutenticacao(json);\r\n                    }\r\n                });\r\n        } catch (err) {\r\n            console.error(err.message);\r\n            setAlerta({ status: \"error\", message: err.message })\r\n        } finally {\r\n            setCarregando(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        try {\r\n            const token = getToken();\r\n            if (token != null) {\r\n                setAutenticado(true);\r\n            }\r\n        } catch (err) {\r\n            setAlerta({ status: \"error\", message: err != null ? err.message : \"\" });\r\n        }\r\n    }, []);\r\n\r\n    if (autenticado === true) {\r\n        return <Navigate to=\"/privado\" />\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\"  >\r\n            <div className=\"row justify-content-center\">\r\n                <div className=\"col-12 col-md-6\">\r\n                    <Carregando carregando={carregando}>\r\n                        <Alerta alerta={alerta} />\r\n                        <form onSubmit={acaoLogin}>\r\n                            <h1 className=\"h3 mb-3 fw-normal\">Login de usu√°rio</h1>\r\n                            <CampoEntrada value={email}\r\n                                id=\"txtEmail\" name=\"email\" label=\"Nome\"\r\n                                tipo=\"email\" onchange={e => setEmail(e.target.value)}\r\n                                msgvalido=\"Email OK\" msginvalido=\"Informe o email\"\r\n                                requerido={true} readonly={false}\r\n                                maxCaracteres={40} />\r\n                            <CampoEntrada value={senha}\r\n                                id=\"txtSenha\" name=\"senha\" label=\"Senha\"\r\n                                tipo=\"password\" onchange={e => setSenha(e.target.value)}\r\n                                msgvalido=\"Senha OK\" msginvalido=\"Informe a senha\"\r\n                                requerido={true} readonly={false}\r\n                                maxCaracteres={40} />\r\n                            <button className=\"w-100 btn btn-lg btn-primary\" type=\"submit\">Efetuar login</button>\r\n                        </form>\r\n                    </Carregando>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Login;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}